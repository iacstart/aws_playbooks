---

- hosts: all
  gather_facts: true
  remote_user: ubuntu
  become: true

  vars:
  #  mysql_packages:
  #    - python-mysqldb

    mysql_root_password: super-secure-password
    mysql_users:
      - name: webshop
        password: superSECR3T
        state: present
        host: "%"
        priv: "*.*:ALL,GRANT"
    mysql_databases:
      - name: webshop
        encoding: utf8
        collation: utf8_general_ci

  pre_tasks:
    - name: Ensure MySQL Python Module is installed
      apt:
        name: "python-mysqldb"
        state: present

  roles:
    - role: geerlingguy.mysql
    #- role: ansible-role-mysql
      become: yes
